<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Mattermost Troubleshooting &mdash; Mattermost 1.3 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Mattermost 1.3 documentation" href="../index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="mattermost-troubleshooting">
<span id="mattermost-troubleshooting"></span><h1>Mattermost Troubleshooting<a class="headerlink" href="#mattermost-troubleshooting" title="Permalink to this headline">¶</a></h1>
<div class="section" id="important-notes">
<span id="important-notes"></span><h2>Important notes<a class="headerlink" href="#important-notes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="do-not-manipulate-the-mattermost-database">
<span id="do-not-manipulate-the-mattermost-database"></span><h3><strong>DO NOT manipulate the Mattermost database</strong><a class="headerlink" href="#do-not-manipulate-the-mattermost-database" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>In particular, DO NOT delete data from the database, as Mattermost is designed to stop working if data integrity has been compromised. The system is designed to archive content continously and generally assumes data is never deleted.</li>
</ul>
</div>
</div>
<div class="section" id="common-issues">
<span id="common-issues"></span><h2>Common Issues<a class="headerlink" href="#common-issues" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lost-system-administrator-account">
<span id="lost-system-administrator-account"></span><h3>Lost System Administrator account<a class="headerlink" href="#lost-system-administrator-account" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>If the System Administrator account becomes unavailable, a person leaving the organization for example, you can set a new system admin from the commandline using <code class="docutils literal"><span class="pre">./platform</span> <span class="pre">-assign_role</span> <span class="pre">-team_name=&quot;yourteam&quot;</span> <span class="pre">-email=&quot;you&#64;example.com&quot;</span> <span class="pre">-role=&quot;system_admin&quot;</span></code>.</li>
<li>After assigning the role the user needs to log out and log back in before the System Administrator role is applied.</li>
</ul>
</div>
</div>
<div class="section" id="mattermost-error-messages">
<span id="mattermost-error-messages"></span><h2>Mattermost Error Messages<a class="headerlink" href="#mattermost-error-messages" title="Permalink to this headline">¶</a></h2>
<p>The following is a list of common error messages and solutions:</p>
<div class="section" id="please-check-connection-mattermost-unreachable-if-issue-persists-ask-administrator-to-check-websocket-port">
<span id="please-check-connection-mattermost-unreachable-if-issue-persists-ask-administrator-to-check-websocket-port"></span><h3><code class="docutils literal"><span class="pre">Please</span> <span class="pre">check</span> <span class="pre">connection,</span> <span class="pre">Mattermost</span> <span class="pre">unreachable.</span> <span class="pre">If</span> <span class="pre">issue</span> <span class="pre">persists,</span> <span class="pre">ask</span> <span class="pre">administrator</span> <span class="pre">to</span> <span class="pre">check</span> <span class="pre">WebSocket</span> <span class="pre">port.</span></code><a class="headerlink" href="#please-check-connection-mattermost-unreachable-if-issue-persists-ask-administrator-to-check-websocket-port" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Message appears in blue bar on team site.</li>
<li><strong>Solution:</strong> Check that <a class="reference external" href="https://github.com/mattermost/platform/blob/master/doc/install/Production-Ubuntu.md#set-up-nginx-server">your websocket port is properly configured</a>.</li>
</ul>
</div>
<div class="section" id="x509-certificate-signed-by-unknown-authority-in-server-logs-when-attempting-to-sign-up">
<span id="x509-certificate-signed-by-unknown-authority-in-server-logs-when-attempting-to-sign-up"></span><h3><code class="docutils literal"><span class="pre">x509:</span> <span class="pre">certificate</span> <span class="pre">signed</span> <span class="pre">by</span> <span class="pre">unknown</span> <span class="pre">authority</span></code> in server logs when attempting to sign-up<a class="headerlink" href="#x509-certificate-signed-by-unknown-authority-in-server-logs-when-attempting-to-sign-up" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>This error may appear when attempt to use a self-signed certificate to setup SSL, which is not yet supported by Mattermost. You</li>
<li><strong>Solution:</strong> Set up a load balancer like Ngnix <a class="reference external" href="https://github.com/mattermost/platform/blob/master/doc/install/Production-Ubuntu.md#set-up-nginx-with-ssl-recommended">per production install guide</a>. A ticket exists to [add support for self-signed certificates in future](x509: certificate signed by unknown authority).</li>
</ul>
</div>
<div class="section" id="panic-runtime-error-invalid-memory-address-or-nil-pointer-dereference">
<span id="panic-runtime-error-invalid-memory-address-or-nil-pointer-dereference"></span><h3><code class="docutils literal"><span class="pre">panic:</span> <span class="pre">runtime</span> <span class="pre">error:</span> <span class="pre">invalid</span> <span class="pre">memory</span> <span class="pre">address</span> <span class="pre">or</span> <span class="pre">nil</span> <span class="pre">pointer</span> <span class="pre">dereference</span></code><a class="headerlink" href="#panic-runtime-error-invalid-memory-address-or-nil-pointer-dereference" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>This error can occur if you have manually manipulated the Mattermost database, typically with deletions. Mattermost is designed to serve as a searchable archive, and manual manipulation of the database elements compromises integrity and may prevent upgrade.</li>
<li><strong>Solution:</strong> Restore from database backup created prior to manual database updates, or reinstall the system.</li>
</ul>
</div>
</div>
<div class="section" id="troubleshooting-gitlab-mattermost">
<span id="troubleshooting-gitlab-mattermost"></span><h2>Troubleshooting GitLab Mattermost<a class="headerlink" href="#troubleshooting-gitlab-mattermost" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>If you&#8217;re having issues installing GitLab Mattermost with GitLab Omnibus, as a first step please turn on logging by updating the <a class="reference external" href="https://github.com/mattermost/platform/blob/master/doc/install/Configuration-Settings.md#log-file-settings">log settings</a> section in your <code class="docutils literal"><span class="pre">config.json</span></code> file installed by omnibus, and they try a general web search for the error message you receive.</li>
</ul>
<div class="section" id="gitlab-mattermost-error-messages">
<span id="gitlab-mattermost-error-messages"></span><h3>GitLab Mattermost Error Messages<a class="headerlink" href="#gitlab-mattermost-error-messages" title="Permalink to this headline">¶</a></h3>
<div class="section" id="we-received-an-unexpected-status-code-from-the-server-200">
<span id="we-received-an-unexpected-status-code-from-the-server-200"></span><h4><code class="docutils literal"><span class="pre">We</span> <span class="pre">received</span> <span class="pre">an</span> <span class="pre">unexpected</span> <span class="pre">status</span> <span class="pre">code</span> <span class="pre">from</span> <span class="pre">the</span> <span class="pre">server</span> <span class="pre">(200)</span></code><a class="headerlink" href="#we-received-an-unexpected-status-code-from-the-server-200" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>If you have upgraded from a pre-released version of GitLab Mattermost or if an unforseen issue has arrisen during the <a class="reference external" href="https://github.com/mattermost/platform/blob/master/doc/install/Upgrade-Guide.md">upgrade procedure</a>, you may be able to restore Mattermost using the following procedure:<ul>
<li><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">stop</span> <span class="pre">mattermost</span></code>, so DB can be dropped</li>
<li><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">gitlab-ctl</span> <span class="pre">reconfigure</span></code></li>
<li><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">-u</span> <span class="pre">gitlab-psql</span> <span class="pre">/opt/gitlab/embedded/bin/dropdb</span> <span class="pre">-h</span> <span class="pre">/var/opt/gitlab/postgresql</span> <span class="pre">mattermost_production</span></code></li>
<li><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">start</span> <span class="pre">mattermost</span></code></li>
<li><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">gitlab-ctl</span> <span class="pre">reconfigure</span></code></li>
<li><a class="reference external" href="https://github.com/mattermost/platform/blob/master/doc/integrations/Single-Sign-On/Gitlab.md">Manually set up GitLab SSO</a> by copying Secret and ID into <code class="docutils literal"><span class="pre">/var/opt/gitlab/mattermost/config.json</span></code></li>
<li><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">gitlab-ctl</span> <span class="pre">restart</span></code></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="token-request-failed">
<span id="token-request-failed"></span><h4><code class="docutils literal"><span class="pre">Token</span> <span class="pre">request</span> <span class="pre">failed</span></code><a class="headerlink" href="#token-request-failed" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>This error can appear in the web browser after attempting to create a new team with GitLab SSO enabled</li>
<li><strong>Solutions:</strong><ol>
<li>Check that your SSL settings for the SSO provider match the <code class="docutils literal"><span class="pre">http://</span></code> or <code class="docutils literal"><span class="pre">https://</span></code> choice selected in <code class="docutils literal"><span class="pre">config.json</span></code> under <code class="docutils literal"><span class="pre">GitLabSettings</span></code></li>
<li>Follow steps 1 to 3 of the manual <a class="reference external" href="https://github.com/mattermost/platform/blob/master/doc/integrations/Single-Sign-On/Gitlab.md">GitLab SSO configuration procedure</a> to confirm your <code class="docutils literal"><span class="pre">Secret</span></code> and <code class="docutils literal"><span class="pre">Id</span></code> settings in <code class="docutils literal"><span class="pre">config.json</span></code> match your GitLab settings, and if they don&#8217;t, manually update <code class="docutils literal"><span class="pre">config.json</span></code> to the correct settings and see if this clears the issue.</li>
</ol>
</li>
</ul>
</div>
<div class="section" id="we-couldn-t-find-the-existing-account">
<span id="we-couldn-t-find-the-existing-account"></span><h4><code class="docutils literal"><span class="pre">We</span> <span class="pre">couldn't</span> <span class="pre">find</span> <span class="pre">the</span> <span class="pre">existing</span> <span class="pre">account</span></code><a class="headerlink" href="#we-couldn-t-find-the-existing-account" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>This error appears when a user attempts to sign in using a single-sign-on option with an account that was not created using that single-sign-on option. For example, if a user creates Account A using email sign-up, then attempts to sign-in using GitLab SSO, the error appears since Account A was not created using GitLab SSO.</li>
<li><strong>Solution:</strong><ul>
<li>If you&#8217;re switching from email auth to GitLab SSO, and you&#8217;re getting this issue on an admin account, consider deactivating your email-based account, then creating a new account with System Admin privileges using GitLab SSO. Specifically:<ol>
<li>Deactivate your email-based System Admin account (note: this process is <a class="reference external" href="https://mattermost.atlassian.net/browse/PLT-975">scheduled to improve</a>)</li>
<li>Temporarily turn off email verification (<strong>System Console</strong> &gt; <strong>Email Settings</strong> &gt; <strong>Require Email Verification</strong> &gt; <strong>false</strong>, or set <code class="docutils literal"><span class="pre">&quot;RequireEmailVerification&quot;:</span> <span class="pre">false</span></code> in <code class="docutils literal"><span class="pre">config.json</span></code>).</li>
<li>Change email for account to random address so you can create a new GitLab SSO account using your regular address.</li>
<li>Create a new Mattermost account using GitLab SSO</li>
<li>With GitLab SSO enabled, go to <code class="docutils literal"><span class="pre">https://domain.com/teamname</span></code> and sign-up for a new Mattermost account using your GitLab SSO account with preferred email address.</li>
<li><a class="reference external" href="https://github.com/mattermost/platform/blob/master/doc/install/Troubleshooting.md#lost-system-administrator-account">Upgrade the new account to System Admin privileges</a>.</li>
<li>Deactivate the previous System Admin account that used email authentication.</li>
<li>Using the new GitLab SSO System Admin account go to <strong>System Console</strong> &gt; <strong>[TEAMNAME]</strong> &gt; <strong>Users</strong>, find the previous account and set it to &#8220;Inactive&#8221;</li>
</ol>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Mattermost Troubleshooting</a><ul>
<li><a class="reference internal" href="#important-notes">Important notes</a><ul>
<li><a class="reference internal" href="#do-not-manipulate-the-mattermost-database"><strong>DO NOT manipulate the Mattermost database</strong></a></li>
</ul>
</li>
<li><a class="reference internal" href="#common-issues">Common Issues</a><ul>
<li><a class="reference internal" href="#lost-system-administrator-account">Lost System Administrator account</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mattermost-error-messages">Mattermost Error Messages</a><ul>
<li><a class="reference internal" href="#please-check-connection-mattermost-unreachable-if-issue-persists-ask-administrator-to-check-websocket-port"><code class="docutils literal"><span class="pre">Please</span> <span class="pre">check</span> <span class="pre">connection,</span> <span class="pre">Mattermost</span> <span class="pre">unreachable.</span> <span class="pre">If</span> <span class="pre">issue</span> <span class="pre">persists,</span> <span class="pre">ask</span> <span class="pre">administrator</span> <span class="pre">to</span> <span class="pre">check</span> <span class="pre">WebSocket</span> <span class="pre">port.</span></code></a></li>
<li><a class="reference internal" href="#x509-certificate-signed-by-unknown-authority-in-server-logs-when-attempting-to-sign-up"><code class="docutils literal"><span class="pre">x509:</span> <span class="pre">certificate</span> <span class="pre">signed</span> <span class="pre">by</span> <span class="pre">unknown</span> <span class="pre">authority</span></code> in server logs when attempting to sign-up</a></li>
<li><a class="reference internal" href="#panic-runtime-error-invalid-memory-address-or-nil-pointer-dereference"><code class="docutils literal"><span class="pre">panic:</span> <span class="pre">runtime</span> <span class="pre">error:</span> <span class="pre">invalid</span> <span class="pre">memory</span> <span class="pre">address</span> <span class="pre">or</span> <span class="pre">nil</span> <span class="pre">pointer</span> <span class="pre">dereference</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#troubleshooting-gitlab-mattermost">Troubleshooting GitLab Mattermost</a><ul>
<li><a class="reference internal" href="#gitlab-mattermost-error-messages">GitLab Mattermost Error Messages</a><ul>
<li><a class="reference internal" href="#we-received-an-unexpected-status-code-from-the-server-200"><code class="docutils literal"><span class="pre">We</span> <span class="pre">received</span> <span class="pre">an</span> <span class="pre">unexpected</span> <span class="pre">status</span> <span class="pre">code</span> <span class="pre">from</span> <span class="pre">the</span> <span class="pre">server</span> <span class="pre">(200)</span></code></a></li>
<li><a class="reference internal" href="#token-request-failed"><code class="docutils literal"><span class="pre">Token</span> <span class="pre">request</span> <span class="pre">failed</span></code></a></li>
<li><a class="reference internal" href="#we-couldn-t-find-the-existing-account"><code class="docutils literal"><span class="pre">We</span> <span class="pre">couldn't</span> <span class="pre">find</span> <span class="pre">the</span> <span class="pre">existing</span> <span class="pre">account</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/install/Troubleshooting.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Mattermost.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="../_sources/install/Troubleshooting.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>