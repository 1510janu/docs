<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SMTP Email Setup &mdash; Mattermost 1.3 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Mattermost 1.3 documentation" href="../index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="smtp-email-setup">
<span id="smtp-email-setup"></span><h1>SMTP Email Setup<a class="headerlink" href="#smtp-email-setup" title="Permalink to this headline">¶</a></h1>
<p>In product evaluation setups with single-container Docker instances, email is intentionally disabled. This allows account creation and system operation without having to set up email, but it also means email notification and password reset functionality aren&#8217;t available.</p>
<div class="section" id="how-to-enable-email">
<span id="how-to-enable-email"></span><h2>How to enable email<a class="headerlink" href="#how-to-enable-email" title="Permalink to this headline">¶</a></h2>
<p>To enable email, configure an SMTP email service as follows:</p>
<ol class="simple">
<li><strong>Set up an SMTP email sending service</strong> (if you don&#8217;t yet have an SMTP service with credentials)<ol>
<li>Any SMTP email service can be used, you just need the following information: <code class="docutils literal"><span class="pre">Server</span> <span class="pre">Name</span></code>, <code class="docutils literal"><span class="pre">Port</span></code>, <code class="docutils literal"><span class="pre">SMTP</span> <span class="pre">Username</span></code>, and <code class="docutils literal"><span class="pre">SMTP</span> <span class="pre">Password</span></code>.<ol>
<li>If you don&#8217;t have an SMTP service, here are simple instructions to set one up with <a class="reference external" href="https://aws.amazon.com/ses/">Amazon Simple Email Service (SES)</a>:<ol>
<li>Go to <a class="reference external" href="https://console.aws.amazon.com/ses">Amazon SES console</a> then <code class="docutils literal"><span class="pre">SMTP</span> <span class="pre">Settings</span> <span class="pre">&gt;</span> <span class="pre">Create</span> <span class="pre">My</span> <span class="pre">SMTP</span> <span class="pre">Credentials</span></code></li>
<li>Copy the <code class="docutils literal"><span class="pre">Server</span> <span class="pre">Name</span></code>, <code class="docutils literal"><span class="pre">Port</span></code>, <code class="docutils literal"><span class="pre">SMTP</span> <span class="pre">Username</span></code>, and <code class="docutils literal"><span class="pre">SMTP</span> <span class="pre">Password</span></code> for Step 2 below.</li>
<li>From the <code class="docutils literal"><span class="pre">Domains</span></code> menu set up and verify a new domain, then enable <code class="docutils literal"><span class="pre">Generate</span> <span class="pre">DKIM</span> <span class="pre">Settings</span></code> for the domain.<ol>
<li>We recommend you set up <em><a class="reference external" href="https://en.wikipedia.org/wiki/Sender_Policy_Framework">Sender Policy Framework</a> (SPF)</em> and/or <em><a class="reference external" href="https://en.wikipedia.org/wiki/DomainKeys_Identified_Mail">Domain Keys Identified Mail</a> (DKIM)</em> for your email domain.</li>
</ol>
</li>
<li>Choose an sender address like <code class="docutils literal"><span class="pre">mattermost&#64;example.com</span></code> and click <code class="docutils literal"><span class="pre">Send</span> <span class="pre">a</span> <span class="pre">Test</span> <span class="pre">Email</span></code> to verify setup is working correctly.</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li><strong>Configure SMTP settings</strong><ol>
<li>Open the <strong>System Console</strong> by logging into an existing team and accessing &#8220;System Console&#8221; from the main menu.<ol>
<li>Alternatively, if a team doesn&#8217;t yet exist, go to <code class="docutils literal"><span class="pre">http://dockerhost:8065/</span></code> in your browser, create a team, then from the main menu click <strong>System Console</strong></li>
</ol>
</li>
<li>Go to the <strong>Email Settings</strong> tab and configure the following:<ol>
<li><strong>Allow Sign Up With Email:</strong> <code class="docutils literal"><span class="pre">true</span></code></li>
<li><strong>Send Email Notifications:</strong> <code class="docutils literal"><span class="pre">true</span></code></li>
<li><strong>Require Email Verification:</strong> <code class="docutils literal"><span class="pre">true</span></code></li>
<li><strong>Notification Display Name:</strong> Display name on email account sending notifications</li>
<li><strong>Notification Email Address:</strong> Email address displayed on email account used to send notifications</li>
<li><strong>SMTP Username</strong>: <code class="docutils literal"><span class="pre">SMTP</span> <span class="pre">Username</span></code> from Step 1</li>
<li><strong>SMTP Password</strong>: <code class="docutils literal"><span class="pre">SMTP</span> <span class="pre">Password</span></code> from Step 1</li>
<li><strong>SMTP Server</strong>: <code class="docutils literal"><span class="pre">SMTP</span> <span class="pre">Server</span></code> from Step 1</li>
<li><strong>SMTP Port</strong>: <code class="docutils literal"><span class="pre">SMTP</span> <span class="pre">Port</span></code> from Step 1</li>
<li><strong>Connection Security</strong>: <code class="docutils literal"><span class="pre">TLS</span> <span class="pre">(Recommended)</span></code></li>
<li>Then click <strong>Save</strong></li>
<li>Then click <strong>Test Connection</strong></li>
<li>If the test failed please look in <strong>OTHER</strong> &gt; <strong>Logs</strong> for any errors that look like <code class="docutils literal"><span class="pre">[EROR]</span> <span class="pre">/api/v1/admin/test_email</span> <span class="pre">...</span></code></li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="known-good-sample-settings">
<span id="known-good-sample-settings"></span><h2>Known Good Sample Settings<a class="headerlink" href="#known-good-sample-settings" title="Permalink to this headline">¶</a></h2>
<div class="section" id="amazon-ses">
<span id="amazon-ses"></span><h3>Amazon SES<a class="headerlink" href="#amazon-ses" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Set <strong>SMTP Username</strong> to <strong>AKIASKLDSKDIWEOWE</strong></li>
<li>Set <strong>SMTP Password</strong> to <strong>AdskfjAKLSDJShflsdfjkakldADkjkjdfKAJDSlkjweiqQIWEOU</strong></li>
<li>Set <strong>SMTP Server</strong> to <strong>email-smtp.us-east-1.amazonaws.com</strong></li>
<li>Set <strong>SMTP Port</strong> to <strong>465</strong></li>
<li>Set <strong>Connection Security</strong> to <strong>TLS</strong></li>
</ul>
</div>
<div class="section" id="postfix">
<span id="postfix"></span><h3>Postfix<a class="headerlink" href="#postfix" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Make sure Postfix is installed on the machine where Mattermost is installed</li>
<li>Set <strong>SMTP Username</strong> to <strong>(empty)</strong></li>
<li>Set <strong>SMTP Password</strong> to <strong>(empty)</strong></li>
<li>Set <strong>SMTP Server</strong> to <strong>localhost</strong></li>
<li>Set <strong>SMTP Port</strong> to <strong>25</strong></li>
<li>Set <strong>Connection Security</strong> to <strong>(empty)</strong></li>
</ul>
</div>
<div class="section" id="gmail">
<span id="gmail"></span><h3>Gmail<a class="headerlink" href="#gmail" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Set <strong>SMTP Username</strong> to <strong>your_email&#64;gmail.com</strong></li>
<li>Set <strong>SMTP Password</strong> to <strong>your_password</strong></li>
<li>Set <strong>SMTP Server</strong> to <strong>smtp.gmail.com</strong></li>
<li>Set <strong>SMTP Port</strong> to <strong>587</strong></li>
<li>Set <strong>Connection Security</strong> to <strong>TLS</strong></li>
</ul>
</div>
<div class="section" id="office-365">
<span id="office-365"></span><h3>Office 365<a class="headerlink" href="#office-365" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Set <strong>SMTP Username</strong> to <strong>Office 365 username</strong></li>
<li>Set <strong>SMTP Password</strong> to <strong>Office 365 password</strong></li>
<li>Set <strong>SMTP Server</strong> to <strong>smtp.office365.com</strong></li>
<li>Set <strong>SMTP Port</strong> to <strong>587</strong></li>
<li>Set <strong>Connection Security</strong> to <strong>TLS</strong></li>
</ul>
</div>
<div class="section" id="hotmail">
<span id="hotmail"></span><h3>Hotmail<a class="headerlink" href="#hotmail" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Set <strong>SMTP Username</strong> to <strong>your_email&#64;hotmail.com</strong></li>
<li>Set <strong>SMTP Password</strong> to <strong>your_password</strong></li>
<li>Set <strong>SMTP Server</strong> to <strong>smtp-mail.outlook.com</strong></li>
<li>Set <strong>SMTP Port</strong> to <strong>587</strong></li>
<li>Set <strong>Connection Security</strong> to <strong>STARTTLS</strong></li>
</ul>
</div>
</div>
<div class="section" id="troubleshooting-smtp">
<span id="troubleshooting-smtp"></span><h2>Troubleshooting SMTP<a class="headerlink" href="#troubleshooting-smtp" title="Permalink to this headline">¶</a></h2>
<div class="section" id="tip-1">
<span id="tip-1"></span><h3>Tip 1<a class="headerlink" href="#tip-1" title="Permalink to this headline">¶</a></h3>
<p>If you fill in <strong>SMTP Username</strong> and <strong>SMTP Password</strong> then you must set <strong>Connection Security</strong> to <strong>TLS</strong> or to <strong>STARTTLS</strong></p>
</div>
<div class="section" id="tip-2">
<span id="tip-2"></span><h3>Tip 2<a class="headerlink" href="#tip-2" title="Permalink to this headline">¶</a></h3>
<p>If you have issues with your SMTP install, from your Mattermost team site go to the main menu and open <strong>System Console -&gt; Logs</strong> to look for error messages related to your setup. You can do a search for the error code to narrow down the issue. Sometimes ISPs require nuanced setups for SMTP and error codes can hint at how to make the proper adjustments.</p>
<p>For example, if <strong>System Console -&gt; Logs</strong> has an error code reading:</p>
<pre class="literal-block">
Connection unsuccessful: Failed to add to email address - 554 5.7.1 &lt;unknown[IP-ADDRESS]&gt;: Client host rejected: Access denied
</pre>
<p>Search for <code class="docutils literal"><span class="pre">554</span> <span class="pre">5.7.1</span> <span class="pre">error</span></code> and <code class="docutils literal"><span class="pre">Client</span> <span class="pre">host</span> <span class="pre">rejected:</span> <span class="pre">Access</span> <span class="pre">denied</span></code>.</p>
</div>
<div class="section" id="tip-3">
<span id="tip-3"></span><h3>Tip 3<a class="headerlink" href="#tip-3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Attempt to telnet to the email service to make sure the server is reachable.</li>
<li>You must run the following commands from the same machine or virtual instance where <code class="docutils literal"><span class="pre">mattermost/bin/platform</span></code> is located.  So if you&#8217;re running Mattermost from docker you need to <code class="docutils literal"><span class="pre">docker</span> <span class="pre">exec</span> <span class="pre">-ti</span> <span class="pre">mattermost-dev</span> <span class="pre">/bin/bash</span></code></li>
<li>Telnet to the email server with <code class="docutils literal"><span class="pre">telnet</span> <span class="pre">mail.example.com</span> <span class="pre">25</span></code>.  If the command works you should see something like</li>
</ul>
<pre class="literal-block">
Trying 24.121.12.143...
Connected to mail.example.com.
220 mail.example.com NO UCE ESMTP
</pre>
<ul class="simple">
<li>Then type something like <code class="docutils literal"><span class="pre">HELO</span> <span class="pre">&lt;your</span> <span class="pre">mail</span> <span class="pre">server</span> <span class="pre">domain&gt;</span></code>.  If the command works you should see something like</li>
</ul>
<pre class="literal-block">
250-mail.example.com NO UCE
250-STARTTLS
250-PIPELINING
250 8BITMIME
</pre>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">SMTP Email Setup</a><ul>
<li><a class="reference internal" href="#how-to-enable-email">How to enable email</a></li>
<li><a class="reference internal" href="#known-good-sample-settings">Known Good Sample Settings</a><ul>
<li><a class="reference internal" href="#amazon-ses">Amazon SES</a></li>
<li><a class="reference internal" href="#postfix">Postfix</a></li>
<li><a class="reference internal" href="#gmail">Gmail</a></li>
<li><a class="reference internal" href="#office-365">Office 365</a></li>
<li><a class="reference internal" href="#hotmail">Hotmail</a></li>
</ul>
</li>
<li><a class="reference internal" href="#troubleshooting-smtp">Troubleshooting SMTP</a><ul>
<li><a class="reference internal" href="#tip-1">Tip 1</a></li>
<li><a class="reference internal" href="#tip-2">Tip 2</a></li>
<li><a class="reference internal" href="#tip-3">Tip 3</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/install/SMTP-Email-Setup.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Mattermost.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="../_sources/install/SMTP-Email-Setup.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>