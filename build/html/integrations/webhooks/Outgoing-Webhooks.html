<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Outgoing Webhooks &mdash; Mattermost 1.3 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Mattermost 1.3 documentation" href="../../index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="outgoing-webhooks">
<span id="outgoing-webhooks"></span><h1>Outgoing Webhooks<a class="headerlink" href="#outgoing-webhooks" title="Permalink to this headline">¶</a></h1>
<p>Outgoing webhooks allow external applications, written in the programming language of your choice&#8211;to receive HTTP POST requests whenever a user posts to a certain channel, with a trigger word at the beginning of the message, or a combination of both. If the external application responds appropriately to the HTTP request, as response post can be made in the channel where the original post occurred.</p>
<p>A couple key points:</p>
<ul class="simple">
<li><strong>Mattermost outgoing webhooks are Slack-compatible.</strong> If you&#8217;ve used Slack&#8217;s outgoing webhooks to create integrations, you can copy and paste that code to create Mattermost integrations. Mattermost automatically translates Slack&#8217;s proprietary JSON payload format into markdown to render in Mattermost messages</li>
<li><strong>Mattermost outgoing webhooks support full markdown.</strong> When an integration responds with a message to post, it will have access to a rich range of formatting unavailable in Slack that is made possible through <a class="reference external" href="../../usage/Markdown.md">markdown support</a> in Mattermost. This includes headings, formatted fonts, tables, inline images and other options supported by [Mattermost Markdown]</li>
</ul>
<p><em>Example:</em></p>
<p>Suppose you had an external application that recieved a post event whenever a message starting with <code class="docutils literal"><span class="pre">#build</span></code>. If a user posted the message <code class="docutils literal"><span class="pre">#build</span> <span class="pre">Let's</span> <span class="pre">see</span> <span class="pre">the</span> <span class="pre">status</span></code>, then the external application would receive an HTTP POST with data about that message. The application could then respond with a table of total tests run and total tests failed by component category, with links to failed tests by category. An example response might be:</p>
<pre class="literal-block">
{&quot;text&quot;: &quot;
---
##### Build Break - Project X - December 12, 2015 - 15:32 GMT +0
| Component  | Tests Run   | Tests Failed                                   |
|:-----------|:------------|:-----------------------------------------------|
| Server     | 948         | :white_check_mark: 0                           |
| Web Client | 123         | :warning: [2 (see details)](http://linktologs) |
| iOS Client | 78          | :warning: [3 (see details)](http://linktologs) |
---
&quot;}
</pre>
<p>Which would render in a Mattermost message as follows:</p>
<hr class="docutils" />
<div class="section" id="build-break-project-x-december-12-2015-15-32-gmt-0">
<span id="build-break-project-x-december-12-2015-15-32-gmt-0"></span><h2>Build Break - Project X - December 12, 2015 - 15:32 GMT +0<a class="headerlink" href="#build-break-project-x-december-12-2015-15-32-gmt-0" title="Permalink to this headline">¶</a></h2>
<p>| Component  | Tests Run   | Tests Failed                                   |
|:&#8212;&#8212;&#8212;&#8211;|:&#8212;&#8212;&#8212;&#8212;|:&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;|
| Server     | 948         | :white_check_mark: 0                           |
| Web Client | 123         | :warning: <a class="reference external" href="http://linktologs">2 (see details)</a> |
| iOS Client | 78          | :warning: <a class="reference external" href="http://linktologs">3 (see details)</a> |</p>
</div>
<hr class="docutils" />
<div class="section" id="enabling-outgoing-webhooks">
<span id="enabling-outgoing-webhooks"></span><h2>Enabling Outgoing Webhooks<a class="headerlink" href="#enabling-outgoing-webhooks" title="Permalink to this headline">¶</a></h2>
<p>Outgoing webhooks are off by default, and can be enabled by the system administrator. If you are the system administrator you can enable them by doing the following:</p>
<ol class="simple">
<li>Login to your Mattermost team account that has the system administrator role.</li>
<li>Enable outgoing webhooks from <strong>System Console -&gt; Service Settings</strong>.</li>
<li>(Optional) Configure the <strong>Enable Overriding of Usernames from Webhooks</strong> option to allow external applications to post messages under any name. If not enabled, the username of the creator of the webhook URL is used to post messages.</li>
<li>(Optional) Configure the <strong>Enable Overriding of Icon from Webhooks</strong> option to allow external applciations to change the icon of the account posting messages. If not enabled, the icon of the creator of the webhook URL is used to post messages.</li>
</ol>
</div>
<div class="section" id="set-up-an-outgoing-webhook">
<span id="set-up-an-outgoing-webhook"></span><h2>Set Up an Outgoing Webhook<a class="headerlink" href="#set-up-an-outgoing-webhook" title="Permalink to this headline">¶</a></h2>
<p>Once outgoing webhooks are enabled, you will be able to set one up through the Mattermost UI. You will need to know the following</p>
<ol class="simple">
<li>The channel (if not all of them) you want to listen to post events from</li>
<li>The trigger words (if any) that will trigger a post event if they are the <strong>first word</strong> of the post</li>
<li>The URL you want Mattermost to report the events to</li>
</ol>
<p>Once you have those, you can follow these steps to set up your webhook:</p>
<ol class="simple">
<li>Login to your Mattermost team site and go to <strong>Account Settings -&gt; Integrations</strong></li>
<li>Next to <strong>Outgoing Webhooks</strong> click <strong>Edit</strong></li>
<li>Under <strong>Add a new outgoing webhook</strong> select your options</li>
<li>Select a channel from the <strong>Channel</strong> dropdown to only report events from a certain channel (optional if Trigger Words selected)</li>
<li>Enter comma separated words into <strong>Trigger Words</strong> to only report events from posts that start with one of those words (optional if <strong>Channel</strong> selected)</li>
<li>Enter new line separated URLs that the post events will be sent too</li>
<li>Click <strong>Add</strong> to add your webhook to the system</li>
<li>Your new outgoing webhook will be displayed below with a <strong>Token</strong> that any external application that wants to listen to the webhook should ask for in it&#8217;s instructions</li>
</ol>
</div>
<div class="section" id="creating-integrations-using-outgoing-webhooks">
<span id="creating-integrations-using-outgoing-webhooks"></span><h2>Creating Integrations using Outgoing Webhooks<a class="headerlink" href="#creating-integrations-using-outgoing-webhooks" title="Permalink to this headline">¶</a></h2>
<p>If you&#8217;d like to build your own integration that uses outgoing webhooks, you can follow these general guidelines:</p>
<ol class="simple">
<li>In the programming language of your choice, write your integration to perform what you had in mind</li>
<li>Your integration should have a function for receiving HTTP POSTs from Mattermost that look like this example:</li>
</ol>
<pre class="literal-block">
  Content-Length: 244
  User-Agent: Go 1.1 package http
  Host: localhost:5000
  Accept: application/json
  Content-Type: application/x-www-form-urlencoded

  channel_id=hawos4dqtby53pd64o4a4cmeoo&amp;
  channel_name=town-square&amp;
  team_domain=someteam&amp;
  team_id=kwoknj9nwpypzgzy78wkw516qe&amp;
  text=some text here&amp;
  timestamp=1445532266&amp;
  token=zmigewsanbbsdf59xnmduzypjc&amp;
  trigger_word=some&amp;
  user_id=rnina9994bde8mua79zqcg5hmo&amp;
  user_name=somename
</pre>
<ol class="simple">
<li>Your integration must have a configurable <strong>MATTERMOST_TOKEN</strong> variable that is the Token given to you when you set up the outgoing webhook in Mattermost as decribed in the previous section <em>Set Up an Outgoing Webhook</em>. This configurable <strong>MATTERMOST_TOKEN</strong> must match the token in the request body so your application can be sure the request came from Mattermost</li>
<li>If you want your integration to post a message back to the same channel, it can respond to the HTTP POST request from Mattermost with a JSON response body similar to this example:</li>
</ol>
<pre class="literal-block">
{
  &quot;text&quot;: &quot;This is some response text.&quot;
}
</pre>
<ol class="simple">
<li>Set up your integration running on Heroku, an AWS server or a server of your own to start getting real time post events from Mattermost channels</li>
</ol>
<p>Additional Notes:</p>
<ol class="simple">
<li>With <strong>Enable Overriding of Usernames from Webhooks</strong> turned on,  you can also override the username the message posts as by providing a <code class="docutils literal"><span class="pre">username</span></code> parameter in your JSON payload. For example, you might want your message looking like it came from a robot so you can use the JSON response <code class="docutils literal"><span class="pre">{&quot;username&quot;:</span> <span class="pre">&quot;robot&quot;,</span> <span class="pre">&quot;text&quot;:</span> <span class="pre">&quot;Hello,</span> <span class="pre">this</span> <span class="pre">is</span> <span class="pre">some</span> <span class="pre">text.&quot;}</span></code> to change the username of the post to robot. Note, to combat any malicious users from trying to use this to perform <a class="reference external" href="https://en.wikipedia.org/wiki/Phishing">phishing attacks</a> a <code class="docutils literal"><span class="pre">BOT</span></code> indicator appears next to posts coming from webhooks</li>
<li>With <strong>Enable Overriding of Icon from Webhooks</strong> turned on, you can similarly change the icon the message posts with by providing a link to an image in the <code class="docutils literal"><span class="pre">icon_url</span></code> parameter of your JSON response. For example, <code class="docutils literal"><span class="pre">{&quot;icon_url&quot;:</span> <span class="pre">&quot;http://somewebsite.com/somecoolimage.jpg&quot;,</span> <span class="pre">&quot;text&quot;:</span> <span class="pre">&quot;Hello,</span> <span class="pre">this</span> <span class="pre">is</span> <span class="pre">some</span> <span class="pre">text.&quot;}</span></code> will post using whatever image is located at <code class="docutils literal"><span class="pre">http://somewebsite.com/somecoolimage.jpg</span></code> as the icon for the post</li>
<li>Also, as mentioned previously, <a class="reference external" href="../../usage/Markdown.md">markdown</a> can be used to create richly formatted payloads, for example: <code class="docutils literal"><span class="pre">payload={&quot;text&quot;:</span> <span class="pre">&quot;#</span> <span class="pre">A</span> <span class="pre">Header\nThe</span> <span class="pre">_text_</span> <span class="pre">below</span> <span class="pre">**the**</span> <span class="pre">header.&quot;}</span></code> creates a messages with a header, a carriage return and bold text for &#8220;the&#8221;</li>
<li>Just like regular posts, the text will be limited to 4000 characters at maximum</li>
</ol>
</div>
<div class="section" id="slack-compatibility">
<span id="slack-compatibility"></span><h2>Slack Compatibility<a class="headerlink" href="#slack-compatibility" title="Permalink to this headline">¶</a></h2>
<p>As mentioned above, Mattermost makes it easy to take integrations written for Slack&#8217;s proprietary JSON payload format and repurpose them to become Mattermost integrations. The following automatic translations are supported:</p>
<ol class="simple">
<li>The HTTP POST request body is formatted the same as Slack&#8217;s, which means your Slack integration&#8217;s receiving function should not need to change at all to be compatible with Mattermost</li>
<li>JSON responses designed for Slack using <code class="docutils literal"><span class="pre">&lt;&gt;</span></code> to note the need to hyperlink a URL, such as <code class="docutils literal"><span class="pre">{&quot;text&quot;:</span> <span class="pre">&quot;&lt;http://www.mattermost.com/&gt;&quot;}</span></code>, are translated to the equivalent markdown in Mattermost and rendered the same as you would see in Slack</li>
<li>Similiarly, responses designed for Slack using <code class="docutils literal"><span class="pre">|</span></code> within a <code class="docutils literal"><span class="pre">&lt;&gt;</span></code> to define linked text, such as <code class="docutils literal"><span class="pre">{&quot;text&quot;:</span> <span class="pre">&quot;Click</span> <span class="pre">&lt;http://www.mattermost.com/|here&gt;</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">link.&quot;}</span></code>, are also translated to the equivalent markdown in Mattermost and rendered the same as you would see in Slack</li>
</ol>
<p>To see samples and community contributions, please visit <a class="reference external" href="http://mattermost.org/webhooks">http://mattermost.org/webhooks</a>.</p>
<div class="section" id="known-issues-in-v1-1">
<span id="known-issues-in-v1-1"></span><h3>Known Issues in v1.1<a class="headerlink" href="#known-issues-in-v1-1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Overriding of usernames does not yet apply to notifications</li>
<li>Cannot supply <code class="docutils literal"><span class="pre">icon_emoji</span></code> to override the message icon</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Outgoing Webhooks</a><ul>
<li><a class="reference internal" href="#build-break-project-x-december-12-2015-15-32-gmt-0">Build Break - Project X - December 12, 2015 - 15:32 GMT +0</a></li>
<li><a class="reference internal" href="#enabling-outgoing-webhooks">Enabling Outgoing Webhooks</a></li>
<li><a class="reference internal" href="#set-up-an-outgoing-webhook">Set Up an Outgoing Webhook</a></li>
<li><a class="reference internal" href="#creating-integrations-using-outgoing-webhooks">Creating Integrations using Outgoing Webhooks</a></li>
<li><a class="reference internal" href="#slack-compatibility">Slack Compatibility</a><ul>
<li><a class="reference internal" href="#known-issues-in-v1-1">Known Issues in v1.1</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/integrations/webhooks/Outgoing-Webhooks.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Mattermost.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="../../_sources/integrations/webhooks/Outgoing-Webhooks.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>